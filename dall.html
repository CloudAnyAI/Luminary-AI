    <!DOCTYPE html>
<html data-theme="wireframe" lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dall - Luminary</title>
    <script src="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.3/dist/tailwind.min.css"></script>
    <link rel="icon" type="image/x-icon" href="/draw logo Luminary AI [21CDAAA].png">
    <meta name="description" content="Sản phẩm do Danh Trình tạo ra, thuộc Việt Nam">
    <meta name="keywords" content="luminary, ai, ai luminary, tool luminary, dall, luminary ai, danh trình, luminary pages dev, luminary.pages.dev, luminary vietnam">

    <meta property="og:url" content="https://luminary.pages.dev">
    <meta property="og:title" content="Luminary AI - Luminary.Pages.Dev">
    <meta property="og:description" content="Sản phẩm do Danh Trình tạo ra, thuộc Việt Nam">
    <meta property="og:image" content="favicon.jpg">
<!-- TrustBox script -->
<script type="text/javascript" src="//widget.trustpilot.com/bootstrap/v5/tp.widget.bootstrap.min.js" async></script>
<!-- End TrustBox script -->
    <link rel='manifest' href='/manifest.json'>
    <meta name='mobile-web-app-capable' content='yes'>
    <meta name='apple-mobile-web-app-capable' content='yes'>
    <meta name='application-name' content='Luminary+'><meta name='apple-mobile-web-app-title' content='Luminary+'>
    <meta name='msapplication-starturl' content='/'>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N3ZZR4ZW');</script>
<!-- End Google Tag Manager -->
    <!-- stylesheet -->
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/@material-tailwind/html@latest/styles/material-tailwind.css"
    />
    <!-- script -->
    <script src="https://unpkg.com/@material-tailwind/html@latest/scripts/script-name.js"></script>
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300;0,400;1,800&display=swap"
      rel="stylesheet"
    />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
  <link href="toolimg.css" rel="stylesheet">
<link href="cardtool.css" rel="stylesheet">
    <style>
    @font-face {
      font-family: Bubble;
      src: url(/Luminary-AI-main/Product Sans Regular.otf);
    }

      body {
        background-color:#fff;
        font-family: Bubble;
      }
      .font-lumi {
        font-family: Bubble;
      }
      /*css for color*/
      .bg-[#000000e5] {
        background-color: #000000e5;
      }
      .backdrop-blur {
        backdrop-filter: blur(8px);
        background-color: #ffffff89;
      }
      .wih {
        width: 400px;
        border-radius: 16px;
      }

      .pdg {
        margin-bottom: 90px;
      }

        .inputprompt {
  width: 100%;
  margin-top: 30px;
  margin-bottom: 15px;
  height: 45px;
  
  border-radius: 12px;
  border: 1.5px solid lightgrey;
  outline: none;
  transition: all 0.3s cubic-bezier(0.19, 1, 0.22, 1);
  box-shadow: 0px 0px 20px -18px;
}

.inputprompt:hover {
  border: 2px solid lightgrey;
  box-shadow: 0px 0px 20px -17px;
}

.inputprompt:active {
  transform: scale(0.95);
}

.inputprompt:focus {
  border: 2px solid grey;
}
    </style>
    <script src="data.js">
    </script>
</head>
<body class="bg-white text-gray-800">

        <style>
.btnscale {
    margin-top: 20px;
}
.btnscale:active {
  opacity: 0.5;

    </style>
</head>
    <div id="login-modal" class="fixed inset-0 items-center justify-center backdrop-blur   z-50" style="background-color: #0000008A;">
        <div class="relative gap-10">
        <h1 class="text-center m-3 font-bold text-xl block">Vui lòng đăng nhập trước khi sử dụng công cụ Dall</h1>
        <a href="login.html" class="btnscale bg-gray-800 text-white rounded-2xl w-[35px] h-10 padding-5 mx-auto block">Đăng nhập</a>
        </div>
        </div>


<img class="flex justify-center items-center mt-20 mx-auto select-none" src="/draw logo Luminary AI [21CDAAA].png" alt="" style="width: 100px; height: 100px; ">
        <div class=" p-4 font-sans text-base antialiased font-light leading-relaxed  text-blue-gray-500">

                <form id="image-generator-form" class="space-y-4">
                <div>
              <h6
          class="block mb-2 mt-5 text-center font-sans font-lumi antialiased font-semibold leading-relaxed tracking-normal text-inherit">
          Gõ lời nhắc cho Luminary
        </h6>
        <div class=" h-11 w-full min-w-[200px]">
        <input id="prompt"
            class="inputprompt"
            placeholder="Ví dụ: Một ngôi nhà lớn " class="mb-4" />

        </div>
                <div id="error-message" class="text-red-500 hidden"></div>

            </form>
 <button 
    class="bg-gray-900 rounded-full m-20 select-none text-center p-3 btnscale mx-auto mt-4"
    style="width: 95px; height: 40px;"
    type="submit"
    data-ripple-light="true"
    >
    Generator</button>
            <img id="spinner" src="https://i.imgur.com/UQ1VMWI.gif" class="hidden mt-4  w-12 h-12 pointer-events-none"></div>
            <div id="generated-image" class="mt-4 rounded-2xl"></div>
            <!-- Fullscreen View Modal -->
            <div id="fullscreen-modal" class="fixed w-full h-full inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center hidden z-[9999]">
              <div class="relative bg-black rounded-lg">
                <img id="fullscreen-img" src="" alt="Full Screen Image" class="w-full h-auto">
                <a id="download-btn" class="absolute bottom-4 right-4 bg-blue-500 text-white px-4 py-2 rounded-md">Download</a>
                <button onclick="closeFullscreenModal()" class="absolute top-4 right-4 text-white bg-red-500 p-2 rounded-full">X</button>
              </div>
            </div>
        </div>


        </div>
      </div>
    </div>
</body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N3ZZR4ZW"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<script>
function openImageGeneratorModal() {
    const userAccount = JSON.parse(localStorage.getItem('isLoggedIn'));
    if (userAccount) {
        const userLimits = {
            limited: 4,
            unlimited: Infinity
        };
        const usageKey = `usage_${userAccount.username}_${getUsageResetDate()}`;
        let storedUsageDate = localStorage.getItem("usageDate");
        let usageCount = 0;

        if (storedUsageDate !== getUsageResetDate()) {
            localStorage.setItem("usageDate", getUsageResetDate());
            localStorage.setItem(usageKey, 0);
        } else {
            usageCount = parseInt(localStorage.getItem(usageKey)) || 0;
        }

        if (usageCount >= userLimits[userAccount.accountType]) {
            alert(`Bạn đã đạt đến ngưỡng giới hạn. Thời gian đặt lại: ${getTimeUntilReset()}`);
        } else {
            document.getElementById('dialog-xlll').classList.remove('hidden');
        }
    }
}

function closeImageGeneratorModal() {
    document.getElementById('image-generator-modal').classList.add('hidden');
    document.getElementById('image-generator-form').reset();
    document.getElementById('error-message').classList.add('hidden');
    document.getElementById('generated-image').innerHTML = '';
}

document.getElementById('image-generator-form').addEventListener('submit', function(event) {
    event.preventDefault();
    const prompt = document.getElementById('prompt').value;
    generateImage(prompt);
});

// Initially hide the "Generate Image" button if testuser has exceeded the limit
const isLoggedIn = JSON.parse(localStorage.getItem('isLoggedIn'));
if (isLoggedIn && isLoggedIn.username === 'testuser') {
    const usageKey = `usage_${isLoggedIn.username}_${getUsageResetDate()}`;
    let storedUsageDate = localStorage.getItem('usageDate');
    let usageCount = 0;

    if (storedUsageDate !== getUsageResetDate()) {
        localStorage.setItem('usageDate', getUsageResetDate());
        localStorage.setItem(usageKey, 0);
    } else {
        usageCount = parseInt(localStorage.getItem(usageKey)) || 0;
    }

    if (usageCount >= 4) {
        const generateButtons = document.querySelectorAll('button[data-role="generate-button"]');
        generateButtons.forEach(button => button.style.display = 'none');
    }
}

function generateImage(prompt) {
    const userInfo = JSON.parse(localStorage.getItem('userInfo'));
    if (userInfo) {
        const usageKey = `usage_${userInfo.userId}_${getUsageResetDate()}`;
        const usageCount = parseInt(localStorage.getItem(usageKey)) || 0;
        const userLimits = {
            "janedoe": Infinity,
            "testuser": 3
        };

        if (usageCount >= userLimits[userInfo.username]) {
            document.getElementById('error-message').innerText = `Bạn đã đạt đến ngưỡng giới hạn. Thời gian đặt lại: ${getTimeUntilReset()}`;
            document.getElementById('error-message').classList.remove('hidden');
            return;
        }

        document.getElementById('spinner').classList.remove('hidden');

        fetch("https://backend.buildpicoapps.com/aero/run/image-generation-api?pk=v1-Z0FBQUFBQm1kOFBXU05tYk0zYjl2QVl4MjE1dHlDbl83OUdDQ3dwSUR0dXdYWmlCeFFKVmZESm4xakpSTU1uczZjV2RQaktDd085cnFaZU1ab19hbDk4ZmJGYVJLdm1keG44N2x2dmVzWURGSUU4TnBGMjFkZFU9", {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ prompt: prompt })
        })
        .then(response => response.json())
        .then(data => {
            document.getElementById('spinner').classList.add('hidden');
            if (data.status === 'success') {
                document.getElementById('generated-image').innerHTML = `<img src="${data.imageUrl}" alt="Generated Image" class="w-[40px] h-[40px] padding -10 h-auto rounded-2xl mt-4" onclick="openFullscreenModal('${data.imageUrl}')">`;
                localStorage.setItem(usageKey, usageCount + 1);
            } else {
                displayErrorMessage('Error generating image. Please try again.');
            }
        })
        .catch(error => {
            console.error('Error generating image:', error);
            document.getElementById('spinner').classList.add('hidden');
            displayErrorMessage('Error generating image. Please try again.');
        });
    }
}

function getUsageResetDate() {
    const now = new Date();
    if (now.getHours() >= 22) {
        return now.toISOString().split('T')[0];
    } else {
        const yesterday = new Date(now);
        yesterday.setDate(yesterday.getDate() - 1);
        return yesterday.toISOString().split('T')[0];
    }
}

function getTimeUntilReset() {
    const now = new Date();
    let resetTime = new Date();
    resetTime.setHours(22, 0, 0, 0); // Set reset time to 10 PM today

    if (now > resetTime) {
        resetTime.setDate(resetTime.getDate() + 1); // If it's past 10 PM, set reset time to 10 PM tomorrow
    }

    const timeDifference = resetTime - now;
    const hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((timeDifference % (1000 * 60)) / 1000);

    return `${hours} giờ ${minutes} phút ${seconds} giây`;
}

function displayErrorMessage(message) {
    const errorMessageElement = document.getElementById('error-message');
    errorMessageElement.innerText = message;
    errorMessageElement.classList.remove('hidden');

    // Hide the error message after 5 seconds
    setTimeout(() => {
        errorMessageElement.classList.add('hidden');
    }, 5000);
}
    </script>
</html>
